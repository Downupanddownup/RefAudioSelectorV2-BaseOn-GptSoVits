<!DOCTYPE html>
<style>
    .layui-rate{
        padding: 0;
    }
</style>
<script>
    const ResultAudioListSpace = (function () {
        
        class C_Order {
            constructor(data) {
                this.launch = false;//是否已经展开
                this.audioSort = data.audioSort || 'audioLength';// 音频排序
                this.audioUpDown = data.audioUpDown || 'desc';// 音频排序方式
            }

            sort(resultAudioA, resultAudioB) {
                const _this = this
                const desc = _this.audioUpDown === 'desc' ? -1 : 1;
                if (_this.audioSort === 'audioLength') {
                    return desc * (resultAudioA.audioLength - resultAudioB.audioLength)
                } else if (_this.audioSort === 'score') {
                    return desc * (resultAudioA.score - resultAudioB.score)
                } else if (_this.audioSort === 'audioSimilarScore') {
                    return desc * (resultAudioA.audioSimilarScore - resultAudioB.audioSimilarScore)
                } else if (_this.audioSort === 'asrSimilarScore') {
                    return desc * (resultAudioA.asrSimilarScore - resultAudioB.asrSimilarScore)
                } else if (_this.audioSort === 'compareParamId') {
                    return desc * (resultAudioA.compareParamId - resultAudioB.compareParamId)
                }
            }

            launchTxt(){
                return this.launch ? '收起' : '展开'
            }
            
            getSortHtml(audioSort) {
                if (this.audioSort === audioSort) {
                     if (this.audioUpDown === 'desc') {
                         return `<i class="layui-icon layui-icon-down" style="color: #1E9FFF;cursor: pointer"></i>`
                     } else {
                         return `<i class="layui-icon layui-icon-up" style="color: #1E9FFF;cursor: pointer"></i>`
                     }
                } else {
                    return `<i class="layui-icon layui-icon-down" style="cursor: pointer"></i>`
                }
            }

            changeLaunch() {
                this.launch = !this.launch
            }

            changeSort(audioSort) {
                if (this.audioSort === audioSort) {
                    if (this.audioUpDown === 'desc') {
                        this.audioUpDown = 'asc'
                    } else {
                        this.audioUpDown = 'desc'
                    }
                } else {
                    this.audioSort = audioSort
                    this.audioUpDown = 'desc'
                }
            }
            
        }

        class C_LevelData {
            constructor(data) {
                this.compareType = data.compareType || '';//对比参数
                this.obj = data.obj || null;
                this.type = data.type || 0;//1 参考音频；2 推理文本； 3 对比参数
                this.level = data.level || 0;// 等级
                this.subLevelList = data.subLevelList || [];// 子级
                this.selected = data.selected || false;
                this.resultAudio = null
            }
            
            getHtml(isInTable){
                if (this.type == 1) {
                    const maxWidth = isInTable ? '400px' : 'auto'
                    return `

<div class="limited-width" style="max-width: ${maxWidth}">
<button type="submit" class="layui-btn layui-btn-sm" data-reference-audio="${this.obj.audioPath}" data-reference-audio-content="${this.obj.audioContent}">参考音频</button> 
                    <span >【${this.obj.audioCategory}】${this.obj.audioContent}</span>
</div>

`
                }
                if (this.type == 2) {
                    return `推理文本：${this.obj.textContent}`
                }
                if (this.type == 3) {
                    return `${this.obj.getShowTxt(this.compareType)}`
                }
                return ''
            }
            getTitle(){
                if (this.type == 1) {
                    return `参考内容`
                }
                if (this.type == 2) {
                    return `推理文本`
                }
                if (this.type == 3) {
                    return `对比变量`
                }
                return ''
            }
        }
        
        class C_ResultAudioList {
            constructor(viewId, C_ObjInferenceTaskResultAudioFilter$1) {
                this.viewId = viewId
                this.task = null
                this.taskResultAudioList = []
                this.audioFilter = C_ObjInferenceTaskResultAudioFilter$1
                this.order = new C_Order(C_ObjInferenceTaskResultAudioFilter$1)
                this.levelDeep = 3
                this.levelDatas = []
                this.audioController= new AudioController()
            }

            loadData(){
                const _this = this

                $.customAjax({
                    url: BaseUrl+'evaluation/get_result_evaluation_of_task_list',
                    type: 'post',
                    data:{
                        taskId: _this.audioFilter.taskId,
                        compareParamIds: _this.audioFilter.compareParamIds.join(','),
                        audioIds: _this.audioFilter.audioIds.join(','),
                        textIds: _this.audioFilter.textIds.join(','),
                        audioLengthStart: _this.audioFilter.audioLengthStart,
                        audioLengthEnd: _this.audioFilter.audioLengthEnd,
                        asrSimilarScoreStart: _this.audioFilter.asrSimilarScoreStart,
                        asrSimilarScoreEnd: _this.audioFilter.asrSimilarScoreEnd,
                        audioSimilarScoreStart: _this.audioFilter.audioSimilarScoreStart,
                        audioSimilarScoreEnd: _this.audioFilter.audioSimilarScoreEnd,
                        scoreStart: _this.audioFilter.scoreStart,
                        scoreEnd: _this.audioFilter.scoreEnd,
                        longTextScoreStart: _this.audioFilter.longTextScoreStart,
                        longTextScoreEnd: _this.audioFilter.longTextScoreEnd,
                        remark: _this.audioFilter.remark,
                        order: _this.audioFilter.audioSort,
                        desc: _this.audioFilter.audioUpDown
                    },
                    success: function(res){
                        if (res.code == 0) {
                            
                            
                            _this.task = new C_ObjInferenceTask(res.data.task)
                            _this.taskResultAudioList = res.data.audioList ? res.data.audioList.map(i => new C_ObjInferenceTaskResultAudio(i)) : []
                            _this.levelDeep = _this.task.compareType === 'refer_audio' ? 2 : 3
                            
                            _this.levelDatas = _this.createLevelData()
                            
                            _this.sortLevelData()

                            console.log(_this)

                            _this.render()
                        } else {
                            layui.layer.msg(res.msg)
                        }
                    },
                    error: function(res, msg){
                        layui.layer.msg(msg)
                    }
                })
            }
            render() {
                const _this = this
                const getTpl = $('#resultAudioListTemplate').html();
                // 渲染并输出结果
                layui.laytpl(getTpl).render(_this, function(html){
                    const obj = $('#'+_this.viewId)
                    obj.html(html)

                    layui.element.render('collapse');

                    layui.element.on('collapse(filter-collapse-first)', function(data){
                        console.log(data.show); // 得到当前面板的展开状态，true or false
                        console.log(data.title); // 得到当前点击面板的标题区域对象
                        console.log(data.content); // 得到当前点击面板的内容区域对象

                        // 显示状态，仅用于演示
                        layer.msg('展开状态：'+ data.show);
                        
                        const objId = data.title.attr('data-level-obj-id')
                        const level = data.title.attr('data-level')
                        
                        const levelData = _this.getLevelDataByObjId(objId, level)
                        levelData.selected = data.show
                        
                    });

                    obj.find('td[data-audio-path]').on('click', function (){
                        const resultId = $(this).attr('data-audio-path')
                        if ($(this).html().trim() === '') {
                            _this.loadAudio($(this), resultId)
                        }
                    })

                    obj.find('td[id^=audio-different-]').on('click', function (){
                        const target = $(this).parent().find('td[data-audio-path]')
                        const resultId = target.attr('data-audio-path')
                        if (target.html().trim() === '') {
                            _this.loadAudio(target, resultId)
                        }
                    })
                    
                    obj.find('[data-reference-audio]').on('click',function () {

                        // 阻止事件冒泡到父级元素
                        event.stopPropagation();
                        
                        const path = $(this).attr('data-reference-audio')
                        const content = $(this).attr('data-reference-audio-content')
                        _this.showReferenceAudio(path,content)
                    })

                    let currentSelectedRow = null; // 用来存储当前选中的行

                    // 使用jQuery选择所有具有class为list-item的行
                    obj.find('tr[id^=result-audio-]').on('click', function() {
                        // 如果之前有选中的行，先移除其样式
                        if (currentSelectedRow) {
                            $(currentSelectedRow).removeClass('selected');
                        }

                        // 添加或移除当前行的选中样式
                        $(this).toggleClass('selected');

                        // 更新当前选中的行
                        currentSelectedRow = this;

                    });
                    
                    obj.find('div[id^=audio-score-]').each(function(){
                        const id = $(this).attr('id').replace('audio-score-', '')
                        const resultAudio = _this.taskResultAudioList.find(i => i.id == id)
                        layui.rate.render({
                            elem: '#audio-score-'+id,
                            value: resultAudio.score,
                            choose: function(value){
                                console.log('评分',value); // 获得选中的评分值
                                _this.updateResultAudioScore(id, value)
                            }
                        });
                    })
                    
                    obj.find('i[data-audio-remark-edit]').on('click', function(){
                        const id = $(this).attr('data-audio-remark-edit')
                        _this.showEditRemarkDialog(id)
                    })
                    
                    obj.find('#launch').on('click', function(){
                        _this.order.changeLaunch()
                        _this.changeLevelDataLaunch(_this.order.launch)
                        _this.render()
                    })
                    
                    obj.find('#sortScore').on('click', function () {
                        _this.order.changeSort('score')
                        _this.sortLevelData()
                        _this.render()
                    })
                    
                    obj.find('#sortCompare').on('click', function () {
                        _this.order.changeSort('compareParamId')
                        _this.sortLevelData()
                        _this.render()
                    })
                    
                    obj.find('#sortAudioLength').on('click', function () {
                        _this.order.changeSort('audioLength')
                        _this.sortLevelData()
                        _this.render()
                    })
                    
                    obj.find('#sortAsrSimilarScore').on('click', function () {
                        _this.order.changeSort('asrSimilarScore')
                        _this.sortLevelData()
                        _this.render()
                    })
                    
                    obj.find('#sortAudioSimilarScore').on('click', function () {
                        _this.order.changeSort('audioSimilarScore')
                        _this.sortLevelData()
                        _this.render()
                    })
                    
                });
            }

            getLevelDataByObjId(objId, levelDeep){
                const _this = this
                if (levelDeep == 1) {
                    return _this.levelDatas.find(i => i.obj.id == objId)
                } else if (levelDeep == 2) {
                    let levelData = null
                    _this.levelDatas.forEach(first => {
                        first.subLevelList.forEach(second => {
                            if (second.obj.id == objId) {
                                levelData = second
                            }
                        })
                    })
                    return levelData
                }
                return null
            }

            changeLevelDataLaunch(selected){
                const _this = this
                if (_this.levelDeep == 2) {
                    _this.levelDatas.forEach(first => {
                        first.selected = selected
                    })
                } else if (_this.levelDeep == 3) {
                    _this.levelDatas.forEach(first => {
                        first.selected = selected
                        first.subLevelList.forEach(second => {
                            second.selected = selected
                        })
                    })
                }
            }

            showEditRemarkDialog(id){
                const _this = this
                const resultAudio = _this.taskResultAudioList.find(i => i.id == id)

                const dialogIndex = layui.layer.open({
                    type: 1,
                    area: ['600px', '400px'],
                    content: `
                        <table class="table1">
                             <tr>
                                  <td>
                                       <textarea id="audioRemarkEdit" placeholder="请输入备注" class="layui-textarea">${resultAudio.remark}</textarea>
                                </td>
                            </tr>
                        </table>
                `,
                    btn: ['确认', '取消'],
                    yes: function(){
                        const remark = $('#audioRemarkEdit').val()
                        console.log('remark', remark)
                        $.customAjax({
                            url: BaseUrl + 'evaluation/update_result_audio_remark',
                            type: 'POST',
                            data: {
                                id: id,
                                remark: remark
                            },
                            success: function (data) {
                                if (data.code == 0) {
                                    layui.layer.msg('保持成功')
                                    layui.layer.close(dialogIndex)
                                    resultAudio.remark = remark
                                    $('#' + _this.viewId + ' #data-audio-remark-span-'+id).html(remark)
                                } else {
                                    layui.layer.msg(data.msg)
                                }
                            }
                        })
                    }
                });
                
            }

            updateResultAudioScore(id, score){
                const _this = this
                $.customAjax({
                    url: BaseUrl + 'evaluation/update_result_audio_score',
                    type: 'POST',
                    data: {
                        id: id,
                        score: score
                    },
                    success: function (data) {
                        if (data.code == 0) {
                            const resultAudio = _this.taskResultAudioList.find(i => i.id == id)
                            resultAudio.score = score
                        } else {
                            layui.layer.msg(data.msg)
                        }
                    }
                })
            }

            showReferenceAudio(path,content){
                const _this = this

                const dialogIndex = layer.open({
                    type: 1,
                    area: ['600px', '400px'],
                    content: `
                        <table class="table1">
                             <tr>
                                  <td>
                                      <audio id="referenceAudio" controls style="width: 350px;height: 30px;margin: 0 0">
                                        <source src="${path.replace(/\\/g, '/')}" type="audio/mpeg">
                                        您的浏览器不支持音频播放。
                                    </audio>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    ${content}
                                </td>
                            </tr>
                        </table>
                `,
                    btn: ['关闭'],
                    yes: function(){
                        layui.layer.close(dialogIndex)
                    }
                });

                const audioElement = document.getElementById(`referenceAudio`);

                _this.audioController.registerEventListener(audioElement)

                _this.audioController.dispatchClickEvent(audioElement);
                
            }

            loadAudio(divElement, resultId){
                const _this = this
                if (divElement.html().trim() !== '') {
                    return
                }
                const entry = _this.taskResultAudioList.find(item => item.id == resultId)
                divElement.html(`
                         <audio id="audio-${entry.id}" controls style="width: 350px;height: 30px;margin: 0 0">
                            <source src="${entry.path.replace(/\\/g, '/')}" type="audio/mpeg">
                            您的浏览器不支持音频播放。
                        </audio>
                `)

                const div = document.getElementById(`result-audio-${entry.id}`);

                const contentElement = div.querySelector(`#audio-different-${entry.id}`);
                const audioElement = div.querySelector(`#audio-${entry.id}`);

                contentElement.addEventListener('click', function () {
                    _this.audioController.dispatchClickEvent(audioElement);
                });

                _this.audioController.registerEventListener(audioElement)
            }
            
            sortLevelData() {
                const _this = this
                if (_this.levelDeep == 2) {

                    _this.levelDatas.forEach(first => {
                        first.subLevelList.sort((a, b) => _this.order.sort(a.resultAudio, b.resultAudio))
                    })
                    
                } else if (_this.levelDeep == 3) {
                    _this.levelDatas.forEach(first => {
                        first.subLevelList.forEach(second => {
                            second.subLevelList.sort((a, b) => _this.order.sort(a.resultAudio, b.resultAudio))
                        })
                    })
                }
            }
            
            createLevelData() {
                const _this = this
                //1 参考音频；2 推理文本； 3 对比参数
                const textObj = {
                    list: _this.task.taskTextList,
                    type:2
                }
                const audioObj = {
                    list: _this.task.taskAudioList,
                    type:1
                }
                const compareParamObj = {
                    list: _this.task.compareParams,
                    type:3
                }
                if (_this.levelDeep == 2) {
                    if (_this.audioFilter.includeSort == 6) {//推理文本->参考音频
                        return _this.generateTwoLevelData(textObj, audioObj)
                    } else if (_this.audioFilter.includeSort == 7) {//参考音频->推理文本
                        return _this.generateTwoLevelData(audioObj, textObj)
                    }
                } else {
                    if (_this.audioFilter.includeSort == 0) {//参考音频->推理文本->比对参数
                        return _this.generateThreeLevelData(audioObj, textObj, compareParamObj)
                    } else if (_this.audioFilter.includeSort == 1) {//参考音频->比对参数->推理文本
                        return _this.generateThreeLevelData(audioObj, compareParamObj, textObj)
                    } else if (_this.audioFilter.includeSort == 2) {//比对参数->推理文本->参考音频
                        return _this.generateThreeLevelData(compareParamObj, textObj, audioObj)
                    } else if (_this.audioFilter.includeSort == 3) {//比对参数->参考音频->推理文本
                        return _this.generateThreeLevelData(compareParamObj, audioObj, textObj)
                    } else if (_this.audioFilter.includeSort == 4) {//推理文本->参考音频->比对参数
                        return _this.generateThreeLevelData(textObj, audioObj, compareParamObj)
                    } else if (_this.audioFilter.includeSort == 5) {//推理文本->比对参数->参考音频
                        return _this.generateThreeLevelData(textObj, compareParamObj, audioObj)
                    }
                }
                return []
            }
            
            generateTwoLevelData(firstRow, secondRow){
                const _this = this
                let levelData = firstRow.list.map(first => {
                    const level = new C_LevelData({
                        compareType: _this.task.compareType,
                        obj: first,
                        type: firstRow.type,
                        level: 1
                    })
                    level.subLevelList = secondRow.list.map(second => {
                        const twoLevel = new C_LevelData({
                            compareType: _this.task.compareType,
                            obj: second,
                            type: secondRow.type,
                            level: 2
                        })
                        //1 参考音频；2 推理文本； 3 对比参数
                        const firstId = first.id
                        const secondId = second.id
                        if (firstRow.type == 1) {
                            twoLevel.resultAudio = _this.taskResultAudioList.find(audio => audio.audioId == firstId && audio.textId == secondId)
                        } else if (firstRow.type == 2) {
                            twoLevel.resultAudio = _this.taskResultAudioList.find(audio => audio.textId == firstId && audio.audioId == secondId)
                        }
                        
                        return twoLevel
                    })
                    return level
                })
                levelData.forEach(i => {
                    i.subLevelList = i.subLevelList.filter(j => j.resultAudio != null)
                })
                levelData = levelData.filter(i => i.subLevelList.length > 0)
                return levelData
            }
            
            generateThreeLevelData(firstRow, secondRow, threeRow){
                const _this = this
                let levelData = firstRow.list.map(first => {
                    const level = new C_LevelData({
                        compareType: _this.task.compareType,
                        obj: first,
                        type: firstRow.type,
                        level: 1
                    })
                    level.subLevelList = secondRow.list.map(second => {
                        const twoLevel = new C_LevelData({
                            compareType: _this.task.compareType,
                            obj: second,
                            type: secondRow.type,
                            level: 2
                        })
                        twoLevel.subLevelList = threeRow.list.map(three => {
                            const threeLevel = new C_LevelData({
                                compareType: _this.task.compareType,
                                obj: three,
                                type: threeRow.type,
                                level: 3
                            })
                            //1 参考音频；2 推理文本； 3 对比参数
                            let audioId = 0
                            let textId = 0
                            let compareParamId = 0
                            if (firstRow.type == 1) {
                                if (secondRow.type == 2) {
                                    audioId = first.id
                                    textId = second.id
                                    compareParamId = three.id
                                } else if (secondRow.type == 3) {
                                    audioId = first.id
                                    textId = three.id
                                    compareParamId = second.id
                                }
                            } else if (firstRow.type == 2) {
                                if (secondRow.type == 1) {
                                    audioId = second.id
                                    textId = first.id
                                    compareParamId = three.id
                                } else if (secondRow.type == 3) {
                                    audioId = three.id
                                    textId = first.id
                                    compareParamId = second.id
                                }
                            } else if (firstRow.type == 3) {
                                if (secondRow.type == 1) {
                                    audioId = second.id
                                    textId = three.id
                                    compareParamId = first.id
                                } else if (secondRow.type == 2) {
                                    audioId = three.id
                                    textId = second.id
                                    compareParamId = first.id
                                }
                            }
                            threeLevel.resultAudio = _this.taskResultAudioList.find(audio => audio.textId == textId && audio.audioId == audioId && audio.compareParamId == compareParamId)
                            return threeLevel
                        })
                        return twoLevel
                    })
                    return level
                })
                levelData.forEach(i => {
                    i.subLevelList.forEach(j => {
                        j.subLevelList = j.subLevelList.filter(k => k.resultAudio != null)
                    })
                })
                levelData.forEach(i => {
                    i.subLevelList = i.subLevelList.filter(j => j.subLevelList.length > 0)
                })
                levelData = levelData.filter(i => i.subLevelList.length > 0)
                return levelData
            }

            getFirstLevelData(){
                return this.levelDatas
            }
            
        }

        function getResultAudioList(viewId, C_ObjInferenceTaskResultAudioFilter$1) {
            return new C_ResultAudioList(viewId, C_ObjInferenceTaskResultAudioFilter$1)
        }

        return {
            getResultAudioList: getResultAudioList
        }
    })()
</script>
<script id="resultAudioListTemplate" type="text/html">

    <table class="table3">
        <tr>
            <td style="width: 20%"><span id="launch">{{d.order.launchTxt()}}</span></td>
            <td style="width: 16%"><span id="sortScore">评分 {{-d.order.getSortHtml('score')}}</span></td>
            <td style="width: 16%"><span id="sortCompare">对比变量 {{-d.order.getSortHtml('compareParamId')}}</span></td>
            <td style="width: 16%"><span id="sortAudioLength">时长 {{-d.order.getSortHtml('audioLength')}}</span></td>
            <td style="width: 16%"><span id="sortAsrSimilarScore">文本相似度 {{-d.order.getSortHtml('asrSimilarScore')}}</span></td>
            <td style="width: 16%"><span id="sortAudioSimilarScore">音频相似度 {{-d.order.getSortHtml('audioSimilarScore')}}</span></td>
        </tr>
    </table>
    
    <div>

            {{# if (d.taskResultAudioList.length < 1) { }}
                <div class="no-data">暂无数据</div>
            {{# } else { }}
                
                {{# if(d.levelDeep == 2){ }}
                
                    <div class="layui-collapse" lay-filter="filter-collapse-first">
                
                
                        {{# layui.each(d.getFirstLevelData(), function(index, item){ }}
                
                        <div class="layui-colla-item">
                            <div class="layui-colla-title" data-level="1" data-level-obj-id="{{item.obj.id}}">{{- item.getHtml(false)}}</div>
                            <div class="layui-colla-content {{isTrue(item.selected,'layui-show','')}}">
                                
                                <table id="audioList" class="table2" >
        
                                    {{# layui.each(item.subLevelList, function(index2, item2){ }}
                                    
                                        {{# if(index2 == 0) { }}
            
                                            <tr style="height: 46px" class="first-row">
                                                <td style="width: 5%">序号</td>
                                                <td style="width: 8%;">评分</td>
                                                <td style="width: 20%;min-width: 380px">推理音频</td>
                                                <td style="width: 15%">{{item2.getTitle()}}</td>
                                                <td style="width: 5%;">时长</td>
                                                <td style="width: 5%;">文本相似度</td>
                                                <td style="width: 5%;">音频相似度</td>
                                                <td style="width: 10%;">备注</td>
                                            </tr>
                                        
                                        {{# } }}
                                    
                                    <tr id="result-audio-{{item2.resultAudio.id}}" style="height: 46px">
                                        <td>{{index2+1}}</td>
                                        <td><div id="audio-score-{{item2.resultAudio.id}}" class="no-wrap"></div></td>
                                        <td data-audio-path="{{item2.resultAudio.id}}" style="width: 350px;cursor: pointer"></td>
                                        <td id="audio-different-{{item2.resultAudio.id}}" style="text-align: left;" class="single-line">{{- item2.getHtml(true)}}</td>
                                        <td>{{item2.resultAudio.audioLength}}</td>
                                        <td>{{item2.resultAudio.asrSimilarScore.toFixed(4)}}</td>
                                        <td>{{item2.resultAudio.audioSimilarScore}}</td>
                                        <td><span id="data-audio-remark-span-{{item2.resultAudio.id}}">{{item2.resultAudio.remark}}</span><i class="layui-icon layui-icon-edit" data-audio-remark-edit="{{item2.resultAudio.id}}"></i> </td>
                                    </tr>
                                    {{# }) }}
                                </table>
                                
                            </div>
                        </div>
                
                        {{# }) }}
                
                    </div>
                
                
                {{# } else if (d.levelDeep == 3) { }}
            
                <div class="layui-collapse">
            
                    
                    {{# layui.each(d.getFirstLevelData(), function(index, item){ }}
            
                        <div class="layui-colla-item">
                            <div class="layui-colla-title" data-level="1" data-level-obj-id="{{item.obj.id}}">{{-item.getHtml()}}</div>
                            <div class="layui-colla-content {{isTrue(item.selected,'layui-show','')}}">
                
                                {{# layui.each(item.subLevelList, function(index2, item2){ }}
            
                                    <div class="layui-collapse">
                                        <div class="layui-colla-item">
                                            <div class="layui-colla-title" data-level="2" data-level-obj-id="{{item2.obj.id}}">{{-item2.getHtml()}}</div>
                                            <div class="layui-colla-content {{isTrue(item2.selected,'layui-show','')}}">
                                                
                                                <table id="audioList" class="table2" >
                                                    {{# layui.each(item2.subLevelList, function(index3, item3){ }}
                                                        {{# if(index3 == 0) { }}
                                                            <tr style="height: 46px" class="first-row">
                                                                <td style="width: 5%">序号</td>
                                                                <td style="width: 8%;">评分</td>
                                                                <td style="width: 20%;min-width: 380px">推理音频</td>
                                                                <td style="width: 15%">{{item3.getTitle()}}</td>
                                                                <td style="width: 5%;">时长</td>
                                                                <td style="width: 5%;">文本相似度</td>
                                                                <td style="width: 5%;">音频相似度</td>
                                                                <td style="width: 10%;">备注</td>
                                                            </tr>
                                                        {{# } }}
                                                        <tr id="result-audio-{{item3.resultAudio.id}}" style="height: 46px">
                                                            <td>{{index3+1}}</td>
                                                            <td><div id="audio-score-{{item3.resultAudio.id}}" class="no-wrap"></div></td>
                                                            <td data-audio-path="{{item3.resultAudio.id}}" style="width: 350px;cursor: pointer"></td>
                                                            <td id="audio-different-{{item3.resultAudio.id}}" style="text-align: left;" class="single-line">{{- item3.getHtml(true)}}</td>
                                                            <td>{{item3.resultAudio.audioLength}}</td>
                                                            <td>{{item3.resultAudio.asrSimilarScore.toFixed(4)}}</td>
                                                            <td>{{item3.resultAudio.audioSimilarScore}}</td>
                                                            <td><span id="data-audio-remark-span-{{item3.resultAudio.id}}">{{item3.resultAudio.remark}}</span><i class="layui-icon layui-icon-edit" data-audio-remark-edit="{{item3.resultAudio.id}}"></i> </td>
                                                        </tr>
                                                    {{# }) }}
                                                </table>
                                                
                                            </div>
                                        </div>
                                    </div>
                                
                                {{# }) }}
                
                            </div>
                        </div>
                    
                    {{# }) }}
                    
                </div>
                
                
                {{# } }}
            
            {{# } }}
        
    </div>

</script>